ASSUME CS:CODE,DS:DATA,ES:EXTRA

DATA SEGMENT
 M1 DB 10,13,"Enter string (delimiter:'):$"
 M2 DB 10,13,"Number of vowels:$"
 M3 DB 10,13,"Number of digits:$"
 M4 DB 10,13,"Number of consonants:$"
 STR DB 50 DUP(?)        ; space for input
 MAXLEN DB 0AH
 DELIM DB "'"
 VCNT DB 00H
 DGCNT DB 00H
 CNCNT DB 00H
DATA ENDS

EXTRA SEGMENT
 VWSTR DB "aeiouAEIOU"
 DGSTR DB "0123456789"
EXTRA ENDS

PRTMSG MACRO MESSAGE
 LEA DX,MESSAGE
 MOV AH,09H
 INT 21H
ENDM

PRTCNT MACRO COUNT
 MOV AL,COUNT
 ADD AL,30H
 MOV DL,AL
 MOV AH,02H
 INT 21H
ENDM

CODE SEGMENT
START:
 MOV AX,DATA
 MOV DS,AX
 MOV AX,EXTRA
 MOV ES,AX

 LEA SI,STR
 PRTMSG M1

 MOV BX,00
 MOV CH,00H
 MOV CL,MAXLEN
 MOV AH,01H

GETC:
 INT 21H
 CMP AL,DELIM
 JE ENDGET
 MOV [SI],AL
 INC SI
 INC BL
 LOOP GETC

ENDGET:
 CLD
 LEA SI,INSTR
 MOV CL,BL        ; number of chars to process

CHKA:             ; check if vowel
 MOV AL,[SI]      ; take one character
 INC SI

 MOV CH,0AH
 LEA DI,VWSTR
 REPNE SCASB      ;  (Repeat while not equal) (Scan String Byte)
 JNE CHKD
 INC VCNT
 JMP ENDC

CHKD:              ; check if digit
 MOV CH,0AH
 LEA DI,DGSTR
 REPNE SCASB
 JNE CHKC
 INC DGCNT
 JMP ENDC

CHKC:
 INC CNCNT

ENDC:
 LOOP CHKA

 PRTMSG M2
 PRTCNT VCNT
 PRTMSG M3
 PRTCNT DGCNT
 PRTMSG M4
 PRTCNT CNCNT

 MOV AH,4CH
 INT 21H

CODE ENDS
END START
